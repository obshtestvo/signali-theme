@import '../styleguide';
@import '../../node_modules/selectize/dist/css/selectize.css';

select-dropdown {
  margin: 0 0 17px;
  display: block;
  position: relative;
  $padding-vertical: 9px;
  $padding-horizontal: 7px;
  $arrow-color: $body-text-color;
  $remove-button-active-background: darken($secondary-color, 10%);
  $remove-icon-size: 11px;
  $remove-icon-color: $body-text-color;
  $remove-icon-active-color: $white;
  $arrow-width: 12px;
  $arrow-height: 7px;
  $text-color: $body-text-color;
  $search-match-highlight-background: $secondary-color;
  $search-match-highlight-color: $white;
  $dropdown-selected-option-background: $secondary-color-20;
  $create-new-color: $grey-color-80;
  $tag-padding-vertical: 3px;
  $tag-padding-horizontal: 6px;
  $tag-margin-vertical: 4px;
  $tag-margin-horizontal: 3px;
  $tag-border-width: 0;
  $tag-color: $body-text-color;
  $tag-background: linear-gradient(to bottom, $grey-color-60 0%, $grey-color-80 100%);
  $tag-selected-color: $white;
  $tag-selected-background: $secondary-color;

  .selectize-control.plugin-remove_button {
    [data-value] {
      position: relative;
      padding-right: 19px !important;
    }
    [data-value] .remove {
      top: 0;
      right: 0;
      bottom: 0;
      width: 17px;
      display: inline-block;
      padding: $padding-vertical - ($remove-icon-size/2)*0.9 0 0 0;
      border-left: none;
      svg {
        fill: $remove-icon-color;
        width: $remove-icon-size;
        height: $remove-icon-size;
      }
    }
    [data-value] .remove:hover {
      background: rgba(0, 0, 0, 0.09);
    }
    [data-value].active .remove {
      @extend %small-radius;
//      background: $remove-button-active-background;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      svg {
        fill:$remove-icon-active-color;
      }
    }
    .disabled [data-value] .remove:hover {
      background: none;
    }
    .disabled [data-value] .remove {
      border-left: none;
    }
  }

  .selectize-input {
    box-shadow: none;
    border: $standard-border;
    padding: $padding-vertical $padding-horizontal;
    &.focus {
      box-shadow: none;
      border-color: $grey-color;
    }
    &.dropdown-active {
      @extend %small-radius;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
  }
  .selectize-dropdown, .selectize-input, .selectize-input input {
    @extend %bodytext-font;
    color: $text-color;
  }

  .selectize-control.multi {
    .selectize-input {
      &.has-items {
        $padding-top: $padding-vertical - $tag-padding-vertical - $tag-border-width;
        $padding-bottom: $padding-vertical - $tag-padding-vertical - $tag-margin-vertical - $tag-border-width;
        padding: $padding-top $padding-horizontal $padding-bottom;
      }
      > div {
        @extend %small-radius;
        cursor: pointer;
        margin: 0 $tag-margin-horizontal $tag-margin-vertical 0;
        padding: $tag-padding-vertical $tag-padding-horizontal;
        background: $tag-background;
        color: $tag-color;
        border: none;

        &.active {
          background: $tag-selected-background;
          color: $tag-selected-color;
          border: none;
        }
      }
    }
  }
  .selectize-control.single {
    .selectize-input {
      background: linear-gradient(to bottom, $white 0%, $grey-color-60 100%);
      &:after {
        margin-top: round(-1 * $arrow-height / 2);
        height: 0;
        border-width: $arrow-height $arrow-width/2 0 $arrow-width/2;
        border-color: $arrow-color transparent transparent transparent;
      }
      &.dropdown-active:after {
        margin-top: $arrow-height * -0.8;
        border-width: 0 $arrow-width/2 $arrow-height $arrow-width/2;
        border-color: transparent transparent $arrow-color
      }
    }
  }

  .selectize-dropdown {
    @extend %small-radius;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    background: $white;
    border-color: $grey-color;

    [data-selectable] {
      .highlight {
        background: $search-match-highlight-background;
        color: $search-match-highlight-color;
      }
      &:last-child {
        @extend %small-radius;
        border-top-left-radius: 0;
        border-top-right-radius: 0;
      }
    }
    [data-selectable], .optgroup-header {
      padding: $padding-vertical $padding-horizontal;
    }
    .active {
      background-color: $dropdown-selected-option-background;
      color: $text-color;
      &.create {
        color: $create-new-color;
      }
    }
  }
  label {
    display: block;
    @extend %label-font;
    color: $grey-color-100;
    padding: 0 0 5px;
  }
  &[size="full"]{
    width: 100%;
  }
  &[size="half"]{
    width: 50%;
  }
  &[size="standart"]{
    max-width: 380px;
  }
  &[mainsearch]{
    float: left;
    &:first-of-type{
      width: 34%;
      .selectize-input{
      border-radius: 3px 0 0 3px;
      }
    }
    &:last-of-type{
      width: 55.5%;
      .selectize-input {
        border-radius: 0 3px 3px 0;
      }
    }
    .selectize-input {
      padding: 19px 15px;
    }
   .selectize-control.multi .selectize-input.has-items {
     padding: 15px 10px 13px;
   }
  }
  &[location]{
    .selectize-control.single {
      .selectize-input {
        background: linear-gradient(to bottom, $white 0%, $grey-color-60 100%);
        &:after {
          margin-top: round(-1 * $arrow-height / 2);
          border: none;
        }
        &.dropdown-active:after {
          margin-top: $arrow-height * -0.8;
          border-width: 0 $arrow-width/2 $arrow-height $arrow-width/2;
          border-color: transparent transparent $arrow-color;
        }
      }
    }
    .icon{
      display: none;
    }
  }

}
